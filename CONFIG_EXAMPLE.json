{
  "EXAMPLE_CONFIGS": {
    "description": "Contoh JSON config yang disimpan di database untuk blast session",
    
    "SCENARIO_1_DEFAULT_NEW_ACCOUNT": {
      "description": "User tidak set config apapun, menggunakan default untuk account NEW (0-7 hari)",
      "accountAge": "NEW",
      "config": {
        "messageDelay": {
          "min": 2,
          "max": 10
        },
        "contactDelay": {
          "min": 90,
          "max": 300
        },
        "restDelay": {
          "min": 60,
          "max": 120
        },
        "dailyLimit": {
          "min": 40,
          "max": 60
        },
        "restThreshold": {
          "min": 15,
          "max": 25
        },
        "businessHours": {
          "enabled": true,
          "startHour": 9,
          "endHour": 17,
          "excludeWeekends": true,
          "excludeLunchBreak": true,
          "lunchStart": 12,
          "lunchEnd": 13
        },
        "retryConfig": {
          "maxRetries": 3,
          "retryDelay": 60
        },
        "accountAge": "NEW"
      }
    },

    "SCENARIO_2_USER_SET_CONTACT_DELAY_30_40": {
      "description": "User set contactDelay min 30s max 40s di dashboard (CASE ANDA)",
      "accountAge": "NEW",
      "userInput": {
        "contactDelay": {
          "min": 30,
          "max": 40
        }
      },
      "config": {
        "messageDelay": {
          "min": 2,
          "max": 10
        },
        "contactDelay": {
          "min": 30,
          "max": 40,
          "comment": "âœ… User override - ini yang seharusnya tersimpan dan digunakan"
        },
        "restDelay": {
          "min": 60,
          "max": 120
        },
        "dailyLimit": {
          "min": 40,
          "max": 60
        },
        "restThreshold": {
          "min": 15,
          "max": 25
        },
        "businessHours": {
          "enabled": true,
          "startHour": 9,
          "endHour": 17,
          "excludeWeekends": true,
          "excludeLunchBreak": true,
          "lunchStart": 12,
          "lunchEnd": 13
        },
        "retryConfig": {
          "maxRetries": 3,
          "retryDelay": 60
        },
        "accountAge": "NEW"
      }
    },

    "SCENARIO_3_USER_CUSTOM_ALL_SETTINGS": {
      "description": "User set semua config manual di dashboard",
      "accountAge": "ESTABLISHED",
      "userInput": {
        "messageDelay": {
          "min": 5,
          "max": 15
        },
        "contactDelay": {
          "min": 30,
          "max": 40
        },
        "restDelay": {
          "min": 20,
          "max": 45
        },
        "dailyLimit": {
          "min": 150,
          "max": 250
        },
        "restThreshold": {
          "min": 40,
          "max": 70
        },
        "businessHours": {
          "enabled": true,
          "startHour": 8,
          "endHour": 21,
          "excludeWeekends": false,
          "excludeLunchBreak": false,
          "lunchStart": 12,
          "lunchEnd": 13
        }
      },
      "config": {
        "messageDelay": {
          "min": 5,
          "max": 15,
          "comment": "âœ… User override"
        },
        "contactDelay": {
          "min": 30,
          "max": 40,
          "comment": "âœ… User override"
        },
        "restDelay": {
          "min": 20,
          "max": 45,
          "comment": "âœ… User override"
        },
        "dailyLimit": {
          "min": 150,
          "max": 250,
          "comment": "âœ… User override"
        },
        "restThreshold": {
          "min": 40,
          "max": 70,
          "comment": "âœ… User override"
        },
        "businessHours": {
          "enabled": true,
          "startHour": 8,
          "endHour": 21,
          "excludeWeekends": false,
          "excludeLunchBreak": false,
          "lunchStart": 12,
          "lunchEnd": 13,
          "comment": "âœ… User override"
        },
        "retryConfig": {
          "maxRetries": 3,
          "retryDelay": 60,
          "comment": "Default (tidak diubah user)"
        },
        "accountAge": "ESTABLISHED"
      }
    },

    "SCENARIO_4_WARMING_ACCOUNT": {
      "description": "Account WARMING (8-30 hari), user hanya set contactDelay",
      "accountAge": "WARMING",
      "userInput": {
        "contactDelay": {
          "min": 45,
          "max": 90
        }
      },
      "config": {
        "messageDelay": {
          "min": 2,
          "max": 10
        },
        "contactDelay": {
          "min": 45,
          "max": 90,
          "comment": "âœ… User override"
        },
        "restDelay": {
          "min": 45,
          "max": 90,
          "comment": "Default WARMING"
        },
        "dailyLimit": {
          "min": 80,
          "max": 120,
          "comment": "Default WARMING"
        },
        "restThreshold": {
          "min": 25,
          "max": 40,
          "comment": "Default WARMING"
        },
        "businessHours": {
          "enabled": true,
          "startHour": 9,
          "endHour": 17,
          "excludeWeekends": true,
          "excludeLunchBreak": true,
          "lunchStart": 12,
          "lunchEnd": 13
        },
        "retryConfig": {
          "maxRetries": 3,
          "retryDelay": 60
        },
        "accountAge": "WARMING"
      }
    },

    "SCENARIO_5_ESTABLISHED_ACCOUNT": {
      "description": "Account ESTABLISHED (30+ hari), menggunakan default",
      "accountAge": "ESTABLISHED",
      "config": {
        "messageDelay": {
          "min": 2,
          "max": 10
        },
        "contactDelay": {
          "min": 45,
          "max": 150,
          "comment": "Default ESTABLISHED - lebih cepat karena account sudah trusted"
        },
        "restDelay": {
          "min": 30,
          "max": 60,
          "comment": "Default ESTABLISHED - rest period lebih pendek"
        },
        "dailyLimit": {
          "min": 150,
          "max": 200,
          "comment": "Default ESTABLISHED - bisa kirim lebih banyak"
        },
        "restThreshold": {
          "min": 40,
          "max": 60,
          "comment": "Default ESTABLISHED - rest setelah lebih banyak pesan"
        },
        "businessHours": {
          "enabled": true,
          "startHour": 9,
          "endHour": 17,
          "excludeWeekends": true,
          "excludeLunchBreak": true,
          "lunchStart": 12,
          "lunchEnd": 13
        },
        "retryConfig": {
          "maxRetries": 3,
          "retryDelay": 60
        },
        "accountAge": "ESTABLISHED"
      }
    }
  },

  "DATABASE_STRUCTURE": {
    "description": "Struktur di database PostgreSQL (table: blast_sessions)",
    "table": "blast_sessions",
    "column": "config",
    "type": "JSONB",
    "example_row": {
      "id": 1,
      "session_id": "blast_1728367403715_abc123",
      "user_id": 1,
      "whatsapp_session_id": "6281234567890",
      "campaign_name": "Campaign Test Oct 2025",
      "message_template": "Halo {{nama}}, apa kabar?",
      "total_messages": 100,
      "status": "IDLE",
      "config": {
        "messageDelay": { "min": 2, "max": 10 },
        "contactDelay": { "min": 30, "max": 40 },
        "restDelay": { "min": 60, "max": 120 },
        "dailyLimit": { "min": 40, "max": 60 },
        "restThreshold": { "min": 15, "max": 25 },
        "businessHours": {
          "enabled": true,
          "startHour": 9,
          "endHour": 17,
          "excludeWeekends": true,
          "excludeLunchBreak": true,
          "lunchStart": 12,
          "lunchEnd": 13
        },
        "retryConfig": {
          "maxRetries": 3,
          "retryDelay": 60
        },
        "accountAge": "NEW"
      },
      "created_at": "2025-10-08T10:30:03.715Z",
      "updated_at": "2025-10-08T10:30:03.715Z",
      "started_at": null,
      "completed_at": null,
      "paused_at": null,
      "stopped_at": null
    }
  },

  "DEEP_MERGE_LOGIC": {
    "description": "Cara kerja deepMergeConfig yang sudah kita fix",
    "before_fix": {
      "issue": "Shallow merge tidak handle nested objects dengan benar",
      "code": "{ ...ageBasedConfig, ...userConfig }",
      "result": "Jika userConfig kosong/partial, ageBasedConfig menang"
    },
    "after_fix": {
      "logic": "Deep merge per-key dengan priority ke user config",
      "code": "deepMergeConfig(ageBasedConfig, userConfig)",
      "example": {
        "ageBasedConfig": {
          "contactDelay": { "min": 90, "max": 300 },
          "dailyLimit": { "min": 40, "max": 60 }
        },
        "userConfig": {
          "contactDelay": { "min": 30, "max": 40 }
        },
        "result": {
          "contactDelay": { "min": 30, "max": 40, "comment": "FROM USER" },
          "dailyLimit": { "min": 40, "max": 60, "comment": "FROM DEFAULT (tidak ada di userConfig)" }
        }
      }
    }
  },

  "HOW_TO_VERIFY": {
    "description": "Cara cek config yang tersimpan di database",
    "method_1_query_database": {
      "description": "Query langsung ke PostgreSQL",
      "sql": "SELECT session_id, campaign_name, config->>'accountAge' as account_age, config->'contactDelay' as contact_delay, config->'dailyLimit' as daily_limit FROM blast_sessions ORDER BY created_at DESC LIMIT 5;"
    },
    "method_2_api_response": {
      "description": "Cek response dari API GET /blast-control/sessions",
      "endpoint": "GET /blast-control/sessions",
      "response_example": {
        "sessionId": "blast_1728367403715_abc123",
        "campaignName": "Campaign Test",
        "status": "IDLE",
        "config": {
          "contactDelay": { "min": 30, "max": 40 },
          "dailyLimit": { "min": 40, "max": 60 }
        }
      }
    },
    "method_3_logs": {
      "description": "Cek logs saat session dibuat",
      "log_example": [
        "ðŸ“Š Creating session with accountAge: NEW",
        "  contactDelay: { min: 90, max: 300 }  <- DEFAULT",
        "  dailyLimit: { min: 40, max: 60 }",
        "",
        "ðŸ“Š User config applied:",
        "  userContactDelay: { min: 30, max: 40 }  <- USER INPUT",
        "  finalContactDelay: { min: 30, max: 40 }  <- RESULT (USER MENANG)",
        "  userDailyLimit: undefined",
        "  finalDailyLimit: { min: 40, max: 60 }  <- RESULT (DEFAULT KARENA USER TIDAK SET)"
      ]
    }
  },

  "NOTES": {
    "priority": "User config ALWAYS override default config (setelah fix)",
    "default_behavior": "Jika user tidak set sesuatu, maka pakai default berdasarkan accountAge",
    "account_age_categories": {
      "NEW": "0-7 hari - Ultra Safe (delay paling lama)",
      "WARMING": "8-30 hari - Moderate Safe (delay sedang)",
      "ESTABLISHED": "30+ hari - Balanced (delay paling cepat)"
    },
    "recommendation": "Untuk testing, sebaiknya gunakan account ESTABLISHED dengan custom config agar tidak terlalu lambat"
  }
}
